{% extends "base.html" %}
{% block content %}
<h1>Registrar Venda</h1>
<form method="POST" class="form-box">
  <label>Data da venda*</label>
  <input type="datetime-local" name="data_venda" required>

  <div id="itens">
    <div class="linha-item">
      <select name="produto_id[]">
        {% for p in produtos %}
          <option value="{{ p.id }}">{{ p.nome }} (R$ {{ '%.2f'|format(p.preco_venda) }})</option>
        {% endfor %}
      </select>
      <input type="number" name="quantidade[]" min="1" value="1">
    </div>
  </div>

  <button type="button" onclick="addItem()">+ adicionar item</button>
  <button type="submit">Registrar</button>
</form>

<script>
function addItem(){
  const div = document.createElement('div');
  div.className = 'linha-item';
  div.innerHTML = document.querySelector('.linha-item').innerHTML;
  document.getElementById('itens').appendChild(div);
}
</script>
{% endblock %}
