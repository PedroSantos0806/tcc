{% extends "base.html" %}
{% block content %}
<h1>Previsão de Vendas</h1>

<div class="explicacao">
  <h3>Como calculamos a previsão?</h3>
  <p>
    Agrupamos as vendas por dia e treinamos uma <strong>Regressão Linear</strong> simples no número de dias desde a primeira venda.
    A linha contínua representa o histórico; a linha pontilhada, a <strong>previsão dos próximos dias</strong>.
    É um modelo leve para protótipo e pode ser trocado por modelos sazonais no futuro.
  </p>
</div>

<form method="GET" class="form-box">
  <label for="categoria">Filtrar por categoria:</label>
  <select name="categoria" id="categoria" onchange="this.form.submit()">
    <option value="">Todas</option>
    {% for cat in categorias %}
      <option value="{{ cat }}" {% if cat == categoria_selecionada %}selected{% endif %}>{{ cat }}</option>
    {% endfor %}
  </select>
</form>

{% if grafico %}
  {{ grafico | safe }}
{% else %}
  <p>Sem dados suficientes para prever.</p>
{% endif %}
{% endblock %}
