{% extends "base.html" %}
{% block content %}
<h1>Lista de Compras</h1>
<form method="get" class="form-box">
  <label>Margem de segurança (0–1)</label>
  <input type="number" name="margem" step="0.05" value="{{ margem }}" />
  <label>Horizonte (semanas)</label>
  <input type="number" name="semanas" min="1" value="{{ semanas }}" />
  <button type="submit">Recalcular</button>
</form>

<div class="cards-row">
  <div class="card"><h3>Total de Itens</h3><p>{{ total_itens }}</p></div>
  <div class="card"><h3>Custo Estimado</h3><p>R$ {{ '%.2f'|format(total_custo) }}</p></div>
</div>

<table class="table-padrao">
  <thead><tr><th>Ingrediente</th><th>Unidade</th><th>Necessário</th><th>Custo Estimado (R$)</th></tr></thead>
  <tbody>
    {% for c in compras %}
    <tr>
      <td>{{ c.nome }}</td><td>{{ c.unidade }}</td><td>{{ c.necessario }}</td><td>{{ c.custo_estimado }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
