<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Prev Suite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/prevsuite-logo.svg') }}">
  <meta name="theme-color" content="#ff6a3d">
</head>
<body class="{% if session.get('usuario_id') %}app{% endif %}">
  <!-- Seletor de idioma -->
  <nav class="lang-fixed" aria-label="Selecionar idioma">
    <a href="{{ url_for('auth_bp.set_lang', code='pt') }}" title="PortuguÃªs" class="{{ 'active' if (session.get('lang','pt')=='pt') else '' }}">
      <img src="{{ url_for('static', filename='img/flags/br.svg') }}" alt="PortuguÃªs">
    </a>
    <a href="{{ url_for('auth_bp.set_lang', code='en') }}" title="English" class="{{ 'active' if (session.get('lang','pt')=='en') else '' }}">
      <img src="{{ url_for('static', filename='img/flags/us.svg') }}" alt="English">
    </a>
    <a href="{{ url_for('auth_bp.set_lang', code='es') }}" title="EspaÃ±ol" class="{{ 'active' if (session.get('lang','pt')=='es') else '' }}">
      <img src="{{ url_for('static', filename='img/flags/es.svg') }}" alt="EspaÃ±ol">
    </a>
  </nav>

  {% if session.get('usuario_id') %}
  <aside class="sidebar">
    <div class="brand-row">
      <img class="brand-logo-img" src="{{ url_for('static', filename='img/prevsuite-logo.svg') }}" alt="Prev Suite">
    </div>

    <nav class="side-nav">
      <a class="side-link {{ 'active' if request.endpoint=='main_bp.dashboard' else '' }}" href="{{ url_for('main_bp.dashboard') }}"><span>{{ t('Dashboard') }}</span></a>

      {# SÃ³ mostra Menu/Shopping/RelatÃ³rios se vertical for RESTAURANT #}
      {% if session.get('vertical') == 'restaurant' %}
        <a class="side-link {{ 'active' if request.endpoint=='restaurant_bp.menu' else '' }}" href="{{ url_for('restaurant_bp.menu') }}"><span>{{ t('Menu') }}</span></a>
        <a class="side-link {{ 'active' if request.endpoint=='main_bp.lista_compras' else '' }}" href="{{ url_for('main_bp.lista_compras') }}"><span>{{ t('Shopping List') }}</span></a>
        <a class="side-link {{ 'active' if request.endpoint=='main_bp.relatorios' else '' }}" href="{{ url_for('main_bp.relatorios') }}"><span>{{ t('Reports') }}</span></a>
      {% endif %}

      <a class="side-link {{ 'active' if request.endpoint=='main_bp.ver_estoque' else '' }}" href="{{ url_for('main_bp.ver_estoque') }}"><span>{{ t('Stock') }}</span></a>
      <a class="side-link" href="{{ url_for('auth_bp.logout') }}"><span>{{ t('Logout') }}</span></a>
    </nav>

    <div class="side-user">
      <div class="user-avatar">ðŸ‘¤</div>
      <div class="user-meta">
        <div class="user-name">{{ session.get('usuario_nome','UsuÃ¡rio') }}</div>
        <div class="user-email">{{ session.get('usuario_email','') }}</div>
      </div>
    </div>
  </aside>
  {% endif %}

  <main class="main{% if not session.get('usuario_id') %} main-auth{% endif %}">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for message in messages %}<div class="flash-item">{{ message }}</div>{% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <footer class="footer" style="margin:24px auto; text-align:center; opacity:.85; font-size:.9rem">
    Powered by <strong>Aurora Tech</strong> â€” uso exclusivo de clientes Aurora Tech
  </footer>
</body>
</html>
