{% extends "base.html" %}
{% block content %}
<h1>{{ t('Stock') }} (Ingredientes)</h1>

<form method="POST" class="form-box" style="max-width:640px;">
  <h3>{{ t('Create Product') }}</h3>
  <label>{{ t('Product Name') }}</label>
  <input name="nome" required>
  <label>{{ t('Unit') }} (ex.: un, g, ml, fatia)</label>
  <input name="unidade">
  <label>{{ t('Unit cost') }}</label>
  <input name="custo" type="number" step="0.01" min="0" required>
  <label>Perecível?</label>
  <select name="perecivel">
    <option value="1">Sim</option>
    <option value="0">Não</option>
  </select>
  <label>Estoque atual</label>
  <input name="estoque_atual" type="number" step="1" min="0" required>
  <label>Estoque mínimo</label>
  <input name="estoque_minimo" type="number" step="1" min="0" required>
  <button type="submit">{{ t('Save') }}</button>
</form>

<table class="table-padrao" style="margin-top:10px;">
  <thead>
    <tr>
      <th>{{ t('Ingredient') }}</th><th>{{ t('Unit') }}</th><th>{{ t('Unit cost') }}</th><th>Perecível</th>
      <th>{{ t('In stock') }}</th><th>Mínimo</th><th>{{ t('Status') }}</th>
    </tr>
  </thead>
  <tbody>
    {% for i in ingredientes %}
    {% set status = t('OK') %}
    {% set cls = 'badge-ok' %}
    {% if i.estoque_atual <= (i.estoque_minimo or 0) %}
      {% set status = t('Low') %}
      {% set cls = 'badge-warn' %}
    {% endif %}
    <tr>
      <td>{{ i.nome }}</td>
      <td>{{ i.unidade }}</td>
      <td>{{ i.custo|fmt_money }}</td>
      <td>{{ 'Sim' if i.perecivel else 'Não' }}</td>
      <td>{{ i.estoque_atual|fmt_int }}</td>
      <td>{{ i.estoque_minimo|fmt_int }}</td>
      <td><span class="badge {{ cls }}">{{ status }}</span></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
