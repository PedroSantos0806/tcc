{% extends "base.html" %}
{% block content %}
<h1>Estoque (Ingredientes)</h1>
<p class="muted">Projeção baseada na média de consumo dos últimos 30 dias × {{ horizonte }} dias.</p>

<table class="table-padrao">
  <thead>
    <tr>
      <th>Ingrediente</th>
      <th>Unidade</th>
      <th>Custo</th>
      <th>Perecível</th>
      <th>Estoque</th>
      <th>Mínimo</th>
      <th>Cons./dia</th>
      <th>Necess. {{ horizonte }}d</th>
      <th>Nível</th>
    </tr>
  </thead>
  <tbody>
    {% for it in itens %}
    <tr>
      <td>{{ it.nome }}</td>
      <td>{{ it.unidade }}</td>
      <td>{{ it.custo_unitario | moneybr }}</td>
      <td>{{ 'Sim' if it.perecivel else 'Não' }}</td>
      <td>{{ it.estoque_atual | intbr }}</td>
      <td>{{ it.estoque_minimo | intbr }}</td>
      <td>{{ it.media_dia | intbr }}</td>
      <td>{{ it.necessidade_7 | intbr }}</td>
      <td>
        <span class="badge
            {% if it.nivel == 'Urgente' %}badge-danger
            {% elif it.nivel == 'Atenção' %}badge-warn
            {% elif it.nivel == 'Excesso' %}badge-info
            {% else %}badge-ok{% endif %}">
          {{ it.nivel }}
        </span>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
